# plotter-utils

A playground to interact with a [Roland DXY-1150 Plotter](datasheets/DXY-1150A.pdf).

This repository provides a script to interface with the plotter and output generated HPGL files over RS-232.

Make sure the plotter's DIP switches are configured correctly before using!

## RS-232 Serial Communication

The Plotter uses the [RS-232-**C**](datasheets/EIA_RS-232-C.pdf) implementation.
This requires much greater voltage levels than modern transmitters are capable of producing.
The [MAX3232](datasheets/MAX3232.pdf) is compliant and can be used for this.

The script as of right now sends and waits a set period.
This can cause the plotters internal buffer to overflow.
Apparently reading the remaining buffer capacity does not work (at least not reliably).
Ways to fix this issue:
1. (Hacky) Make sure the outbound data rate is slow enough. This is achieved by increasing the command delay `-d` flag.
2. (Recommended) Use RS-232 Handshaking and only output data, once CTS is active (This behavior should be handled by hardware). Note: The CTS signal has the same voltage level requirements as the RX/TX lines. This solution requires dedicated hardware.

## HPGL Generation

HPGL can be generated by various programs:
- KiCad offers an HPGL exporter
- [vpype](https://github.com/abey79/vpype) and its various plugins offer a vast selection of tools
- DIY, just write HPGL by hand, it's fun :)
